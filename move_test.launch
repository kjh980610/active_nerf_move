<?xml version="1.0" ?>
<launch>
  <arg name="robot_ip" default="172.16.0.2" />
  <arg name="arm_id" default="panda" />
  <arg name="transmission" default="effort" doc="The type of position control to use (either 'position' or 'effort')" />
  <include file="$(find franka_control)/launch/franka_control.launch" pass_all_args="true"/>

  <node name="controller_spawner"
        pkg="controller_manager"
        type="spawner"
        respawn="false"
        output="screen"
        args="$(arg transmission)_joint_trajectory_controller">
  </node>

  <node pkg="rviz" 
        type="rviz" 
        output="screen" 
        name="rviz" 
        args="-d $(find franka_example_controllers)/launch/robot.rviz -f $(arg arm_id)_link0 --splash-screen $(find franka_visualization)/splash.png"/>


  <node name="move_to_start"
        pkg="franka_example_controllers"
        type="move_to_start.py"
        output="screen"
        required="false">
    <rosparam file="$(find franka_control)/config/start_pose.yaml" subst_value="true" />
    <remap from="~follow_joint_trajectory" to="$(arg transmission)_joint_trajectory_controller/follow_joint_trajectory" />
    <remap from="~joint_states" to="franka_state_controller/joint_states" />
    <param name="max_dq" value="0.2" /> <!-- [rad/s] -->
  </node>

</launch>
